# Totetris

Онлайн web-игра в тетрис на двоих.

## Правила
1. Первый игрок заходит на сайт и нажимает кнопку «Создать игру».
2. Создаётся игра и выводится ссылка для приглашения.
3. Второй игрок переходит по ссылке и присоединяется к комнате.
4. Запускается обратный отсчёт на 5 секунд.
5. После отсчёта стартует игра: оба игрока управляют собственными фигурами на общем поле.
6. Управление: стрелки влево/вправо и пробел (ускорение в 2 раза).
7. Как только фигура одного из игроков установлена, ему мгновенно выдается следующая.
8. Полностью заполненные горизонтальные линии сгорают, и верхние строки опускаются вниз, как в классическом тетрисе.
9. Фигуры игроков не могут толкать друг друга.

## Подсчёт очков
- За каждую сожжённую линию игрок, совершивший действие, получает 1 балл.
- Если в результате действий игрока поле переполняется, с него списывается 10 баллов, а поле очищается, после чего игра продолжается.

## Завершение игры
- По таймеру: побеждает игрок с наибольшим количеством баллов.
- Если счёт какого-либо игрока становится отрицательным, он автоматически проигрывает.

## Дополнительно
### Игровое поле
- Ширина: 20.
- Высота: 30.

### Набор фигур
- Классический набор фигур тетриса.

## Структура проекта
- `totetris.py` — основной файл игры.
- `totetris.ini` — конфигурационный файл (таймер, размеры поля, скорость игры).

## Конфигурация
Файл `totetris.ini` хранит параметры игрового процесса. Все значения задаются в секции `[game]` и могут быть изменены перед запуском сервера.

| Параметр | Описание |
| --- | --- |
| `width` | Ширина игрового поля в клетках. От этого параметра зависит количество столбцов, по которым могут перемещаться фигуры. Увеличивайте значение, если хотите больше свободного пространства, или уменьшайте для более плотного и сложного геймплея. |
| `height` | Высота игрового поля в клетках. Чем больше значение, тем выше запас высоты перед переполнением поля. Слишком маленькие значения ускоряют наступление конца игры. |
| `tick_ms` | Длительность одного игрового тика в миллисекундах. По умолчанию фигура сдвигается вниз каждые 500 мс. Уменьшите значение для более быстрой игры или увеличьте для размеренного темпа. |
| `countdown` | Количество секунд обратного отсчёта перед стартом партии. Позволяет игрокам подготовиться к началу матча. |
| `game_duration` | Продолжительность сессии в секундах. По истечении времени сравниваются очки игроков и определяется победитель. Установка большего значения растягивает игру, меньшего — делает партии короче. |

## Запуск

```bash
python3 -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
./totetris.py
```

По умолчанию сервер стартует на `http://localhost:8000`. После запуска откройте главную страницу, создайте игру и отправьте ссылку другу.
